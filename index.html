<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bytelogik Assignment - Pallavi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .page { display: none; }
        .active { display: block; }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <nav class="bg-blue-600 text-white p-4 flex gap-4 shadow-lg">
        <button onclick="showPage('students')" class="hover:underline">Students</button>
        <button onclick="showPage('teachers')" class="hover:underline">Teachers</button>
        <button onclick="showPage('courses')" class="hover:underline">Courses</button>
        <button onclick="showPage('view-teachers')" class="hover:underline">Course-Teachers</button>
        <button onclick="showPage('view-students')" class="hover:underline">Course-Students</button>
    </nav>

    <div class="container mx-auto p-6">
        
        <section id="students" class="page active">
            <h2 class="text-2xl font-bold mb-4">Student Management</h2>
            <div class="bg-white p-4 rounded shadow mb-6">
                <input id="std-name" type="text" placeholder="Student Name" class="border p-2 mr-2">
                <button onclick="addStudent()" class="bg-green-500 text-white px-4 py-2 rounded">Add Student</button>
            </div>
            <table class="w-full bg-white rounded shadow">
                <thead><tr class="bg-gray-200 text-left"><th class="p-2">Name</th><th class="p-2">Actions</th></tr></thead>
                <tbody id="student-list"></tbody>
            </table>
        </section>

        <section id="teachers" class="page">
            <h2 class="text-2xl font-bold mb-4">Teacher Management</h2>
            <div class="bg-white p-4 rounded shadow mb-6">
                <input id="tch-name" type="text" placeholder="Teacher Name" class="border p-2 mr-2">
                <button onclick="addTeacher()" class="bg-blue-500 text-white px-4 py-2 rounded">Add Teacher</button>
            </div>
            <table class="w-full bg-white rounded shadow">
                <thead><tr class="bg-gray-200 text-left"><th class="p-2">Name</th><th class="p-2">Actions</th></tr></thead>
                <tbody id="teacher-list"></tbody>
            </table>
        </section>

        <section id="courses" class="page">
            <h2 class="text-2xl font-bold mb-4">Course Management</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="font-bold mb-2">Create Course</h3>
                    <input id="crs-name" type="text" placeholder="Course Name" class="border p-2 w-full mb-2">
                    <button onclick="addCourse()" class="bg-purple-500 text-white px-4 py-2 w-full rounded">Add Course</button>
                </div>
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="font-bold mb-2">Assign Teacher</h3>
                    <select id="assign-course-sel" class="border p-2 w-full mb-2"></select>
                    <select id="assign-teacher-sel" class="border p-2 w-full mb-2"></select>
                    <button onclick="assignTeacher()" class="bg-orange-500 text-white px-4 py-2 w-full rounded">Assign</button>
                </div>
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="font-bold mb-2">Enroll Student</h3>
                    <select id="enroll-course-sel" class="border p-2 w-full mb-2"></select>
                    <select id="enroll-student-sel" class="border p-2 w-full mb-2"></select>
                    <button onclick="enrollStudent()" class="bg-pink-500 text-white px-4 py-2 w-full rounded">Enroll</button>
                </div>
            </div>
            <table class="w-full bg-white rounded shadow">
                <tbody id="course-list"></tbody>
            </table>
        </section>

        <section id="view-teachers" class="page">
            <h2 class="text-2xl font-bold mb-4">Courses & Assigned Teachers</h2>
            <div id="view-teachers-list" class="grid gap-4"></div>
        </section>

        <section id="view-students" class="page">
            <h2 class="text-2xl font-bold mb-4">Courses & Enrolled Students</h2>
            <div id="view-students-list" class="grid gap-4"></div>
        </section>
    </div>

    <script>
        // Data Storage (Simulating a database)
        let students = JSON.parse(localStorage.getItem('students')) || [];
        let teachers = JSON.parse(localStorage.getItem('teachers')) || [];
        let courses = JSON.parse(localStorage.getItem('courses')) || [];

        function saveData() {
            localStorage.setItem('students', JSON.stringify(students));
            localStorage.setItem('teachers', JSON.stringify(teachers));
            localStorage.setItem('courses', JSON.stringify(courses));
            renderAll();
        }

        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');
            renderAll();
        }

        // CRUD Operations
        function addStudent() {
            const name = document.getElementById('std-name').value;
            if(name) { students.push({id: Date.now(), name}); document.getElementById('std-name').value = ''; saveData(); }
        }

        function addTeacher() {
            const name = document.getElementById('tch-name').value;
            if(name) { teachers.push({id: Date.now(), name}); document.getElementById('tch-name').value = ''; saveData(); }
        }

        function addCourse() {
            const name = document.getElementById('crs-name').value;
            if(name) { courses.push({id: Date.now(), name, teacherIds: [], studentIds: []}); document.getElementById('crs-name').value = ''; saveData(); }
        }

        function deleteItem(type, id) {
            if(type === 'std') students = students.filter(s => s.id !== id);
            if(type === 'tch') teachers = teachers.filter(t => t.id !== id);
            saveData();
        }

        function assignTeacher() {
            const cId = parseInt(document.getElementById('assign-course-sel').value);
            const tId = parseInt(document.getElementById('assign-teacher-sel').value);
            const course = courses.find(c => c.id === cId);
            if(!course.teacherIds.includes(tId)) course.teacherIds.push(tId);
            saveData();
        }

        function enrollStudent() {
            const cId = parseInt(document.getElementById('enroll-course-sel').value);
            const sId = parseInt(document.getElementById('enroll-student-sel').value);
            const course = courses.find(c => c.id === cId);
            if(!course.studentIds.includes(sId)) course.studentIds.push(sId);
            saveData();
        }

        function renderAll() {
            // Render Lists
            document.getElementById('student-list').innerHTML = students.map(s => `<tr class="border-t"><td class="p-2">${s.name}</td><td class="p-2"><button onclick="deleteItem('std', ${s.id})" class="text-red-500">Delete</button></td></tr>`).join('');
            document.getElementById('teacher-list').innerHTML = teachers.map(t => `<tr class="border-t"><td class="p-2">${t.name}</td><td class="p-2"><button onclick="deleteItem('tch', ${t.id})" class="text-red-500">Delete</button></td></tr>`).join('');
            
            // Fill Dropdowns
            const courseOpts = courses.map(c => `<option value="${c.id}">${c.name}</option>`).join('');
            document.getElementById('assign-course-sel').innerHTML = courseOpts;
            document.getElementById('enroll-course-sel').innerHTML = courseOpts;
            document.getElementById('assign-teacher-sel').innerHTML = teachers.map(t => `<option value="${t.id}">${t.name}</option>`).join('');
            document.getElementById('enroll-student-sel').innerHTML = students.map(s => `<option value="${s.id}">${s.name}</option>`).join('');

            // View Pages
            document.getElementById('view-teachers-list').innerHTML = courses.map(c => `
                <div class="bg-white p-4 rounded shadow">
                    <h4 class="font-bold border-b pb-2">${c.name}</h4>
                    <p class="mt-2 text-gray-600">Teachers: ${c.teacherIds.map(tid => teachers.find(t => t.id === tid)?.name).join(', ') || 'None'}</p>
                </div>
            `).join('');

            document.getElementById('view-students-list').innerHTML = courses.map(c => `
                <div class="bg-white p-4 rounded shadow">
                    <h4 class="font-bold border-b pb-2">${c.name}</h4>
                    <p class="mt-2 text-gray-600">Students: ${c.studentIds.map(sid => students.find(s => s.id === sid)?.name).join(', ') || 'None'}</p>
                </div>
            `).join('');
        }

        renderAll();
    </script>
</body>
</html>